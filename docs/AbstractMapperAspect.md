# AbstractMapperAspect

Абстрактный аспект, представляющий возможность маппинга полей.

## Использование
Для того,  чтобы реализовать маппинг, необхожимо создать класс, наследующий
`AbstractMapperAspect`, в котором будут реализованы два метода:
* `getFieldsMap()` - возвращает ассоциативный массив, ключи которого представляют
 имена желаемых полей, а значения - имена полей в datastore. Пример:
    ```
  protected function getFieldsMap()
  {
        return [
            'SellerName' => 'name',
            'PartNumber' => 'inv_num'
        ];
  }
    ```
    В данной реализации поле `name` будет переименовано в  `SellerName`, а поле
    `inv_num` - в `PartNumber`

 * `getNotSupportFields()` - возвращает асоциативный массив, в котором ключи -
 имена изначально отсутствующих полей, которые будут добавлены к ответу, а значения -
 содержимое этих полей. Пример:
    ```
    protected function getNotSupportFields()
    {
        return [
            'Source' => 'customers_table'
            'Last_updated' => date('h:i:s, j.n.o')
        ];
     }
    ```

    В данной реализации к ответу будут добавлены два новых поля, `Source` и
    `Last_Updated`

## Как это работает
Перед непосрдственной отправкой запроса алгоритм рекурсивно проходит по всему
обьекту `Query`, меняя имена полей в соответсвии с `fieldsMap`. Затем изменённый `Query`
отправляется в datastore.
После получения ответа алгоритм пройдёт по результату запроса и
добавит к нему поля, полученные от `getNotSupportFields`.


